#include <kipr/wombat.h>
int neg_right_turn = -4300;
int right_turn = 2000;

int main()
{
    shut_down_in(119);
    msleep(3000);
    cmpc(0);
    cmpc(1);
    while(gmpc(0)<2500)
    {
        mav(0,1000);
        msleep(100);
    }
    while(gmpc(0)>0)
    {
        mav(0,-1000);
        msleep(100);
    }
    cmpc(0);
    cmpc(1);
    while((digital(0)==0)||(digital(1)==0))
    {
        mav(0,1000);
        mav(1,1000);
        msleep(10);
        
        if((digital(0)==1)&&(digital(1)==0))
        {
            mav(0,-200);
            mav(1,0);
            msleep(100);
            
        }
        if((digital(0)==0)&&(digital(1)==1))
        {
            mav(0,0);
            mav(1,-200);
            msleep(100);
        }
    }
    ao();
    cmpc(0);
    cmpc(1);
    enable_servos(1);
    set_servo_position(1,500);
    
    while(gmpc(1)>neg_right_turn)
          {
              mav(1,-500);
              mav(0,-250);
              mav(2,1000);
              msleep(100);
          }
    ao();
    cmpc(0);
    cmpc(1);
    while(analog(1)<3750) //test dis number
    {
        mav(0,-1000);
        mav(1,-1000);
        mav(2,1000);
        msleep(100);
    }
    mav(0,-1000);
    mav(1,-1000);
    msleep(500);
    ao();
    cmpc(0);
    cmpc(1);
    while(gmpc(0)<right_turn)
    {
        mav(0,500);
        msleep(100);
    }
    ao();
    mav(0,-1000);
    mav(1,-1000);
    msleep(1125);
    ao();
    cmpc(0);
    cmpc(1);
    set_servo_position(1,1800);
    msleep(3000);
    set_servo_position(1,500);
    mav(0,1000);
    mav(1,1000);
    msleep(250);
    ao();
    cmpc(0);
    cmpc(1);
    while(gmpc(2)<23000)
    {
        mav(2,1000);
        msleep(100);
    }
    while(gmpc(0)<4500)
    {
        mav(0,1000);
        mav(1,-1000);
        msleep(100);
    }
    cmpc(0);
    cmpc(1);
    while((digital(0)==0)||(digital(1)==0))
    {
        mav(0,1000);
        mav(1,1000);
        mav(2,-1000);
        msleep(10);
        
        if((digital(0)==1)&&(digital(1)==0))
        {
            mav(0,-300);
            mav(1,0);
            msleep(100);
            
        }
        if((digital(0)==0)&&(digital(1)==1))
        {
            mav(0,0);
            mav(1,-300);
            msleep(100);
        }
    }
    ao();
    cmpc(0);
    cmpc(1);
    while(analog(1)<3750)
    {
        mav(0,-1000);
        mav(1,-1000);
        mav(2,-1000);
        msleep(100);
    }
    cmpc(0);
    cmpc(1);
    
   while(gmpc(0)>-2250)
   {
       mav(0,-1000);
       mav(2,-1000);
       msleep(100);
   }
    ao();
    return 0;
}
